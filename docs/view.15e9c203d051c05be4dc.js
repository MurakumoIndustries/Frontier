(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{39:function(module,exports){module.exports=function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){if(__p+='<div class="hex-detail" data-id="'+(null==(__t=hex.id)?"":__t)+'">\r\n    <ul class="list-group list-group-flush">\r\n        <li class="list-group-item">\r\n            <div>\r\n                <span>\r\n                    '+(null==(__t=hex.name)?"":__t)+"\r\n                </span>\r\n                ",hex.recomLv>0&&(__p+='\r\n                <span class="font-weight-light pl-3" style="color:#fffb">\r\n                    '+(null==(__t=Ui.getText("recomLv")+hex.recomLv)?"":__t)+"\r\n                    "),__p+="\r\n                </span>\r\n            </div>\r\n        </li>\r\n        ",hex.questId){var stage=hex.stage;__p+='\r\n        <li class="list-group-item" style="white-space: nowrap;overflow: auto;">\r\n            ',_.each(stage.areaList,function(t,n){__p+='\r\n            <div class="stage-container">\r\n                <div class="stage-label">AREA\r\n                    '+(null==(__t=n+1)?"":__t)+'\r\n                </div>\r\n                <div class="parallelogram">\r\n                    <img src=\'../img/quest/'+(null==(__t=(t.icon||"stg2_999_01")+".png")?"":__t)+"' />\r\n                    <div class=\"attr-subscript attr-"+(null==(__t=Data.convertAttr2nd(hex.zakoAttr.weakAttr||t.weakAttr))?"":__t)+'"></div>\r\n                </div>\r\n                <div class="stage-enemy-list">\r\n                    ',_.each(t.enemyList,function(t,n){var e=Data.get("enemy",t);__p+='\r\n                    <div class="stage-label ml-1">\r\n                        <span>\r\n                            '+(null==(__t=e.name)?"":__t)+"\r\n                        </span>\r\n                        "}),__p+="\r\n                        ";for(var e=0;e<t.enemyList.length;e++)__p+="\r\n                    </div>\r\n                    ";__p+="\r\n                </div>\r\n            </div>\r\n            ";var a=1;_.each(t.enemyList,function(t,n){var e=Data.get("enemybase",t);e&&hex.bossAttr.weakAttr&&4!=hex.bossAttr.weakAttr&&255!=hex.bossAttr.weakAttr&&(t=e.frontierChangeEnemyIds[hex.bossAttr.attribute2nd-5]);var i=Data.get("enemy",t);i&&i.icon&&i.type>=10&&(__p+='\r\n            <div class="stage-container enemy" data-id="'+(null==(__t=t)?"":__t)+'">\r\n                <div class="parallelogram">\r\n                    <img src=\'../img/quest/'+(null==(__t=(i.icon||"ene2_800_01")+".png")?"":__t)+"' />\r\n                    <div class=\"attr-subscript attr-"+(null==(__t=Data.convertAttr2nd(i.type>10?hex.bossAttr.weakAttr||i.weakAttr:255))?"":__t)+'"></div>\r\n                </div>\r\n                <div class="stage-label '+(null==(__t=a%2==0?"stage-label-odd":"")?"":__t)+'">\r\n                    '+(null==(__t=i.name)?"":__t)+"\r\n                </div>\r\n            </div>\r\n            ",a++)})}),__p+="\r\n        </li>\r\n        "}__p+="\r\n        ",hex.canGiveUp&&hex.giveUpCost>0&&(__p+='\r\n        <li class="list-group-item">\r\n            <div class="item-container">\r\n                <span data-lang="subcontract">\r\n                    '+(null==(__t=Ui.getText("subcontract"))?"":__t)+'\r\n                </span>\r\n                <i class="icon icon-gold"></i>\r\n                <span>\r\n                    '+(null==(__t=hex.giveUpCost)?"":__t)+"\r\n                </span>\r\n            </div>\r\n        </li>\r\n        "),__p+="\r\n        ",hex.lockBuffs&&hex.lockBuffs.length&&(__p+='\r\n        <li class="list-group-item">\r\n            ',_.each(hex.lockBuffs,function(t,n){if(t){var e=Data.get("buff",t);__p+='\r\n            <div class="item-container">\r\n                <img src=\'../img/quest/'+(null==(__t=e.icon+".png")?"":__t)+'\' class="icon icon-item" />\r\n                <span class="item-count">\r\n                    '+(null==(__t=e.value)?"":__t)+"\r\n                    <span>\r\n            </div>\r\n            "}}),__p+="\r\n        </li>\r\n        "),__p+="\r\n        ",hex.unlockBuffs&&hex.unlockBuffs.length&&(__p+='\r\n        <li class="list-group-item">\r\n            ',_.each(hex.unlockBuffs,function(t,n){if(t){var e=Data.get("buff",t);__p+='\r\n            <div class="item-container">\r\n                <img src=\'../img/quest/'+(null==(__t=e.icon+".png")?"":__t)+'\' class="icon icon-item" />\r\n                <span class="item-count">\r\n                    '+(null==(__t=e.value)?"":__t)+"\r\n                    <span>\r\n            </div>\r\n            "}}),__p+="\r\n        </li>\r\n        "),__p+="\r\n        ",hex.clearBuffs&&hex.clearBuffs.length&&(__p+='\r\n        <li class="list-group-item">\r\n            ',_.each(hex.clearBuffs,function(t,n){if(t){var e=Data.get("buff",t);__p+='\r\n            <div class="item-container">\r\n                <img src=\'../img/quest/'+(null==(__t=e.icon+".png")?"":__t)+'\' class="icon icon-item" />\r\n                <span class="item-count">\r\n                    '+(null==(__t=e.value)?"":__t)+"\r\n                    <span>\r\n            </div>\r\n            "}}),__p+="\r\n        </li>\r\n        "),__p+='\r\n        <li class="list-group-item">\r\n            ',_.each(hex.rewards,function(t,n){t.id&&(t=_.extend(t,Data.get("items",t.id))),__p+='\r\n            <div class="item-container">\r\n                <img src=\'../img/item/'+(null==(__t=(t.icon||"itm2_04_000_01")+".png")?"":__t)+'\' class="icon icon-item" />\r\n                ',t.count>1&&(__p+='\r\n                <span class="item-count">\r\n                    '+(null==(__t=t.count)?"":__t)+"\r\n                    <span>\r\n                        "),__p+="\r\n            </div>\r\n            "}),__p+="\r\n        </li>\r\n    </ul>\r\n</div>"}return __p}},40:function(t,n,e){"use strict";e.r(n),e.d(n,"init",function(){return h});var a,i=e(4),s=e.n(i),r=e(8),o=e.n(r),c=(e(0),e(7)),l=e(2),p=e(1),d=e.n(p),u=e(38),_=e.n(u),v=e(39),g=e.n(v),m=function(){},h=function(t){d.a.start(),f(),d.a.set(.3),x(),d.a.set(.6),b(t),d.a.done()},f=function(){s()("#main").find("img").attr("src",""),s()("#main").empty()},x=function(){if(!a){var t,n=l.Data.getCurrentServer();s()("#server").text(n.name),s()("#version").text(n.version),s.a.each(l.Data.getAllServers(),function(t,e){s()("#serverDivider").before('<a class="dropdown-item '+(t==n.id?"active":"")+'" href="#!/server/'+t+'">'+e.name+'<p class="m-0" style="font-size:0.75rem;line-height:0.75rem;">'+e.version+"</p></a>")}),s()(".map-list-search input").on("input",function(t){s()(".map-list-container ul.collapse").collapse("show"),s()(".map-list-container li").show();var n=s()(".map-list-search input").val();""!==n&&s()(".map-list-container ul>ul>li").each(function(t,e){-1===s()(e).text().indexOf(n)&&s()(e).hide()})}),s()(".map-list-search input").val()&&s()(".map-list-search input").trigger("input"),s()(window).resize(function(){clearTimeout(t),t=setTimeout(m(),500)}),a=!0}},b=function(t){console.log("render",t);if(t){!function(t){t,s()(".map-list-container li.active").removeClass("active");var n=s()(".map-list-container li a[data-map-id="+t+"]");if(n.parents("li:first").addClass("active"),s()(".map-list-container ul.collapse:not(:has(li.active))").collapse("hide"),s()(".map-list-search input").val(""),s()(".map-list-container li").show(),s()(".sidebar-toggle").is(":visible"))s()(".sidebar-collapsable").collapse("hide");else{var e=function(){var t=n.parents("ul:first").parent();t.animate({scrollTop:t.scrollTop()+n.position().top-170},300)};n.is(":visible")?e():(n.parents("ul:first").one("shown.bs.collapse",e),n.parents("ul:first").collapse("show"))}}(t);var n=l.Data.get("maptable",t),e=o.a.minBy(n.hexList,function(t){return t.x}).x,a=o.a.maxBy(n.hexList,function(t){return t.x}).x,i=o.a.minBy(n.hexList,function(t){return t.y}).y,r=o.a.maxBy(n.hexList,function(t){return t.y}).y,p=e;e%2==1&&(e-=1);var d=s()("<table>");d.addClass("hex-table");for(let t=0;t<r-i+1;t++){var u=s()("<tr>");for(let t=0;t<a-e+1;t++){var v=s()("<td>");u.append(v)}d.append(u)}var h={},f=0,x=0,b=0,w=0,y=0,k=0,A=0;s.a.each(n.hexList,function(t,n){var a=n.x-e,r=n.y-i,c=d.find("tr:eq("+r+") td:eq("+a+")"),p=s()("<div>").addClass("hex");n.zakoAttr=l.Data.get("attrset",n.zakoAttr)||{},n.bossAttr=l.Data.get("attrset",n.bossAttr)||{},n.stage=l.Data.get("stage",n.questId)||{};var u=s()("<a>").addClass("hex-content").data("hex",n).attr("data-toggle","popover").attr("tabindex",0),_=s()("<div>"),v=s()("<div>");switch(u.append(_).append(v),n.hexType){case 10:A++;break;case 20:p.addClass("hex-danger"),k++;break;case 30:p.addClass("hex-rare"),y++;break;case 40:_.append('<i class="material-icons">chat</i>');break;case 50:_.append('<i class="icon icon-chest"></i>');break;case 60:_.append('<i class="icon icon-2x icon-PowUpEne" />');break;case 61:_.append('<i class="icon icon-2x icon-PowUpAct" />');break;case 62:_.append('<i class="icon icon-2x icon-PowUpRwd" />');break;case 70:_.append('<i class="icon icon-2x icon-PowDwnEne" />');break;case 71:_.append('<i class="icon icon-2x icon-PowDwnAct" />');break;case 72:_.append('<i class="icon icon-2x icon-PowDwnRwd" />');break;case 90:_.append('<i class="icon icon-endless" />')}switch(o.a.each(n.rewards,function(t,e){var a=t;a.id&&(a=o.a.extend(a,l.Data.get("items",t.id))),50==n.hexType&&("ticket_010_01"==a.id?v.append('<div><i class="icon icon-battery" />'+t.count):"gold"==a.id?v.append('<div><i class="icon icon-gold" />'+t.count):"energy"==a.id&&v.append('<div><i class="icon icon-energy" />'+t.count)),"gacha_point"==a.id&&v.append('<div><i class="icon icon-gacha-point" />'+t.count)}),n.itemHintIndexes.length&&o.a.each(n.itemHintIndexes,function(t,n){var e=""+(t+1);_.append('<i class="icon icon-key icon-key-01-'+"00".substring(0,2-e.length)+e+'" />')}),n.requireMapItems.length&&(_.append('<i class="material-icons">lock_outline</i>'),o.a.each(n.requireMapItems,function(t,n){if(!(t<=0)){var e=""+(n+1);v.append('<i class="icon icon-key icon-key-01-'+"00".substring(0,2-e.length)+e+'" />'+t)}})),n.termType){case 120:_.prepend('<i class="material-icons">play_arrow</i>'),h=n;break;case 130:_.prepend('<i class="material-icons">flag</i>')}if(o.a.each(n.rewards,function(t,n){var e=t;"ticket_010_01"==e.id?x+=t.count:"gacha_point"==e.id?f+=t.count:"gold"==e.id?b+=t.count:"energy"==e.id&&(w+=t.count)}),n.questId){var g=(n.stage.areaList||[]).length;g&&u.append('<div class="hex-area-count">'+g)}var m=s()('<div class="hex-tile">').append('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10,-10,260,180" preserveAspectRatio="xMidYMid meet"><polygon points="0,80 64,0 176,0 240,80 176,160 64,160"></polygon></svg>');p.append(m).append(u),c.append(p)}),s()(".map-name").text(n.hexList.length+"|"+n.name);var D=s()(".map-info");D.empty(),n.canGiveUp?D.append("<div>"+c.a.getText("giveup")+'<i class="icon icon-gold"></i>'+n.giveUpCost):D.append("<div>"+c.a.getText("cannotgiveup")),D.append("<div>"+c.a.getText("total")+'<span><i class="icon icon-hex icon-hex-danger"></i>'+k+'<i class="icon icon-hex icon-hex-rare"></i>'+y+'<i class="icon icon-hex"></i>'+A+'</span><div><i class="icon icon-gacha-point"></i>'+f+'<i class="icon icon-battery"></i>'+x+'<i class="icon icon-gold"></i>'+b+'<i class="icon icon-energy"></i>'+w+"</div>"),s()("#main").append(s()('<div class="hex-table-container">').append(d)),m=function(t){var n=function(t){var n=t.target,e=(parseFloat(n.getAttribute("data-x"))||0)+t.dx,a=(parseFloat(n.getAttribute("data-y"))||0)+t.dy;n.style.webkitTransform=n.style.transform="translate("+e+"px, "+a+"px)",n.setAttribute("data-x",e),n.setAttribute("data-y",a)},e=1,a=d.parent()[0],i=d[0],r=d.parent().width(),o=d.parent().height(),c=d.parent().parent().width(),l=d.parent().parent().height(),p={restriction:"parent",endOnly:!0,elementRect:{top:Math.max((o-l)/o,0),left:Math.max((r-c)/r,0),bottom:Math.min(l/o,1),right:Math.min(c/r,1)}};_()(a).gesturable({inertia:!0,restrict:p,onstart:function(t){},onmove:function(t){(e*=1+t.ds)<.4&&(e=.4),e>2&&(e=2),i.style.webkitTransform=i.style.transform="scale3d("+e+","+e+",1)",n(t)},onend:function(t){}}).draggable({inertia:!0,restrict:p,autoScroll:!0,onmove:n}).on("doubletap dblclick",function(t){i.style.webkitTransform=i.style.transform="",t.preventDefault()}),s()(a).on("wheel",function(t){(e*=1-t.originalEvent.deltaY/1e3)<.6&&(e=.6),e>1&&(e=1),i.style.webkitTransform=i.style.transform="scale("+e+","+e+")"}),console.log("map interact inited")},setTimeout(function(){m()},500);d.parent().parent().width(),d.parent().width(),d.parent().parent().height(),d.parent().height();var T=(d.parent().width()-d.width())/2,B=d.find("div.hex:first").parent().width()+2,L=d.find("div.hex:first").parent().height()+2,C=d.parent().parent().width()/2-((h.x-p)*B+T+B/2),q=d.parent().parent().height()/2-((h.y-i)*L+T+L/2+(h.x-e+1)%2*L/2);console.log(h.x,e,p),d.parent()[0].style.webkitTransform=d.parent()[0].style.transform="translate("+C+"px, "+q+"px)",d.parent()[0].setAttribute("data-x",C),d.parent()[0].setAttribute("data-y",q),s()('[data-toggle="popover"]').popover({html:!0,trigger:"hover",delay:100,placement:"auto",template:'<div class="popover" style="max-width:none;" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body px-0 py-1"></div></div>',title:function(){var t=s()(this).data("hex"),n=s()("<div>").append(s()("<span>").text(t.name));return t.recomLv>0&&n.append(s()('<span class="font-weight-light float-right pl-3">').text(c.a.getText("recomLv")+t.recomLv)),n},content:function(){var t=s()(this).data("hex"),n=s()('<ul class="list-group list-group-flush">');if(t.canGiveUp&&t.giveUpCost>0){var e=s()('<li class="list-group-item p-1">');e.append('<div class="item-container"><span data-lang="subcontract">'+c.a.getText("subcontract")+'</span><i class="icon icon-gold"></i>'+t.giveUpCost+"</div>"),n.append(e)}var a=s()('<li class="list-group-item p-1">');o.a.each(t.lockBuffs,function(t,n){if(t){var e=l.Data.get("buff",t);a.append('<div class="item-container"><img src="../img/quest/'+e.icon+'.png" class="icon icon-item" /><span class="item-count">'+e.value+"<span></div>")}}),o.a.some(t.lockBuffs)&&n.append(a);var i=s()('<li class="list-group-item p-1">');o.a.each(t.unlockBuffs,function(t,n){if(t){var e=l.Data.get("buff",t);i.append('<div class="item-container"><img src="../img/quest/'+e.icon+'.png" class="icon icon-item" /><span class="item-count">'+e.value+"<span></div>")}}),o.a.some(t.unlockBuffs)&&n.append(i);var r=s()('<li class="list-group-item p-1">');o.a.each(t.clearBuffs,function(t,n){if(t){var e=l.Data.get("buff",t);r.append('<div class="item-container"><img src="../img/quest/'+e.icon+'.png" class="icon icon-item" /><span class="item-count">'+e.value+"<span></div>")}}),o.a.some(t.clearBuffs)&&n.append(r);var p=s()('<li class="list-group-item p-1">');return o.a.each(t.rewards,function(t,n){var e=t;e.id&&(e=o.a.extend(e,l.Data.get("items",t.id))),p.append('<div class="item-container"><img src="../img/item/'+(e.icon||"itm2_04_000_01")+'.png" class="icon icon-item" />'+(e.count>1?'<span class="item-count">'+e.count+"<span>":"")+"</div>")}),o.a.some(t.rewards)&&n.append(p),n}}),s()(".hex").click(function(){var t=s()(this).find(".hex-content"),n=t.data("hex"),e=g()({hex:n,Ui:c.a,Data:l.Data}),a=s()(e);a.click(function(){window.getSelection().toString().length||s()(this).fadeOut(500,function(){s()(this).remove(),s()("body").removeClass("no-scroll"),s()('[data-toggle="popover"]').popover("enable")})}),a.find(".stage-container").click(function(t){if(!window.getSelection().toString().length){var n=s()(this).find(".stage-enemy-list");n.is(":visible")?n.fadeOut(500):(s()(this).parent().find(".stage-enemy-list").fadeOut(500),n.fadeIn(500)),t.stopPropagation()}}),a.hide(),s()("body").addClass("no-scroll"),t.popover("disable"),s()("#main").append(a),a.fadeIn(500)}),setTimeout(function(){},100)}};n.default={init:h}}}]);